<mujoco model="rizon4">

    <!-- 编译器设置 -->
    <!-- angle="radian" 表示角度单位为弧度 -->
    <!-- meshdir="assets" 指定所有网格模型文件的目录 -->
    <!-- autolimits="true" 自动根据模型参数推断关节的运动范围 -->
    <compiler angle="radian" meshdir="meshes" autolimits="true"/>

    <!-- 物理仿真选项：仿真步长、重力、积分器、介质密度、介质粘度 -->
    <option timestep="0.002" gravity="0 0 -9.81" integrator="implicitfast" density="1.225" viscosity="1.8e-5"/>

    <default> <!-- default start >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
        <default class="rizon4">
            <!-- specular 镜面反射强度：越大越亮，物体会有高光反光（类似金属、塑料） -->
            <!-- shininess 光泽度：值越大，高光区域越集中、越锐利（类似抛光金属）；越小则高光模糊、散射（类似橡胶）-->
            <material specular="0.5" shininess="0.25"/>
            <!-- 设置默认旋转轴为 y 轴（0 1 0），范围为[-2π, 2π]， -->
            <!-- armature ??? https://mujoco.readthedocs.io/en/latest/XMLreference.html#body-joint-armature-->
            <joint axis="0 1 0" range="-6.28319 6.28319" armature="0.01" damping="0.01" frictionloss="0.01"/>


            <!-- actuator settings >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
            <!-- gaintype 固定，biastype 线性偏置，控制范围，增益和偏置参数，力范围 -->
            <general gaintype="fixed" biastype="affine" ctrlrange="-6.2831 6.2831"
                     gainprm="2000" biasprm="0 -2000 -400" forcerange="-150 150"/>

            <default class="size3">
                <default class="size3_limited">
                    <joint range="-3.1415 3.1415"/>        <!-- 关节运动范围限制为[-π, π] -->
                    <general ctrlrange="-3.1415 3.1415"/>  <!-- 控制范围同样限制为[-π, π] -->
                </default>
            </default>

            <default class="size1">
                <general gainprm="500" biasprm="0 -500 -100" forcerange="-28 28"/> <!-- 较小的增益，偏置和力范围 -->
            </default>
            <!-- actuator settings <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->


            <default class="visual">
                <!-- 视觉几何体属性，类型为 mesh，碰撞相关属性为0 -->
                <geom type="mesh" contype="0" conaffinity="0" group="2"/>
            </default>

            <default class="collision">
                <geom type="capsule" group="3"/>  <!-- 碰撞几何体为胶囊体，属于碰撞组3 -->
                <default class="eef_collision">   <!-- 针对机械臂末端执行器（eef）的碰撞形状 -->
                    <geom type="cylinder"/>       <!-- 末端执行器碰撞几何体类型为圆柱体 -->
                </default>
            </default>

            <!-- 设置 site 的默认配置，中等灰色 带一点透明 -->
            <site size="0.001" rgba="0.5 0.5 0.5 0.3" group="4"/>

        </default>
    </default>  <!-- default end <<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<<< -->


    <asset>
        <material class="rizon4" name="black" rgba="0.033 0.033 0.033 1"/>  <!-- 接近黑色 -->
        <material class="rizon4" name="jointgray" rgba="0.278 0.278 0.278 1"/>  <!-- 深灰色（可能用于关节）-->
        <material class="rizon4" name="linkgray" rgba="0.82  0.82  0.82  1"/>  <!-- 浅灰色（可能用于连杆）-->
        <material class="rizon4" name="urblue" rgba="0.49  0.678 0.8   1"/>  <!-- 蓝色（视觉识别色）-->

        <material class="rizon4" name="white" rgba="0.86 0.86 0.86 1"/>  <!-- 亮银白 -->
        <material class="rizon4" name="rizonblue" rgba="0.45 0.65 0.85 1"/>  <!-- 蓝色 -->

        <mesh file="link0.obj"/>
        <mesh file="link1.obj"/>
        <mesh file="link2.obj"/>
        <mesh file="link3.obj"/>
        <mesh file="link4.obj"/>
        <mesh file="link5.obj"/>
        <mesh file="link6.obj"/>
        <mesh file="link7.obj"/>
        <mesh name="ring_s" file="ring.obj" scale="0.051 0.051 0.002"/>
        <mesh name="ring_b" file="ring.obj" scale="0.062 0.062 0.002"/>

        <mesh name="link0_collision" file="link0_collision.stl"/>
        <mesh name="link1_collision" file="link1_collision.stl"/>
        <mesh name="link2_collision" file="link2_collision.stl"/>
        <mesh name="link3_collision" file="link3_collision.stl"/>
        <mesh name="link4_collision" file="link4_collision.stl"/>
        <mesh name="link5_collision" file="link5_collision.stl"/>
        <mesh name="link6_collision" file="link6_collision.stl"/>
        <mesh name="link7_collision" file="link7_collision.stl"/>
    </asset>


    <worldbody>
        <!-- 添加一个灯光，跟踪目标为 wrist_2_link，位置为(0, -1, 2) -->
        <!--        <light name="spotlight" mode="targetbodycom" target="wrist_2_link" pos="0 -1 2"/>-->

        <!-- 在机械臂 头顶上 添加一个 灯，加了这个灯之后会比较亮 -->
        <light directional="true" diffuse="0.25 0.25 0.25" specular="0.15 0.15 0.15" pos="0 0 25.0" dir="0 0 -1"
               castshadow="false"/>

        <!--        <light directional="true" diffuse="0.6 0.6 0.6" specular="0.2 0.2 0.2" pos="0 0 4" dir="0 0 -1"/>-->

        <!--        <camera name="fixed" pos="0 -3.0 0.517318010072385" xyaxes="1 0 0 0 0 1"/>-->
        <!--        <camera name="track" mode="trackcom" pos="0 -3.0 0.517318010072385" xyaxes="1 0 0 0 0 1"/>-->

        <!-- 基座的位置，quat 四元数 1000表示不旋转，childclass 表示这个 body 以及后面的子类全都使用 rizon4 -->
        <body name="root" pos="0 0 0.01731801007238498" quat="1 0 0 0" childclass="rizon4">
            <!--            <freejoint name="root"/>-->
            <!-- 设置 基座 的 视觉几何体 和 碰撞几何体-->
            <geom type="mesh" mesh="link0_collision" class="collision"/>
            <geom type="mesh" mesh="link0" class="visual" material="white"/>

            <!--            <site name="imu" size="0.01" pos="0 0 0"/>-->

            <!-- 设置 link1 : 相对于 root 原点 z 轴上升 0.155, 绕 z 轴旋转 180 度 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
            <body name="link1" pos="0 0 0.155" quat="0 0 0 -1">
                <!-- 中心位置，质量大小，转动惯量-->
                <inertial pos="0 0.01 0.15" mass="3.7" diaginertia="0.03 0.03 0.01"/>
                <!-- 旋转中心就是这个 body 的坐标原点，z 轴旋转，旋转角度范围 大概是 -160° 到 +160°，最大扭矩 正负123-->
                <joint name="joint1" pos="0 0 0" axis="0 0 1" range="-2.7925 2.7925" actuatorfrcrange="-123 123"/>
                <!-- 设置 link1 的 视觉几何体 和 碰撞几何体-->
                <geom type="mesh" mesh="link1_collision" class="collision"/>
                <geom type="mesh" mesh="link1" class="visual" material="white"/>
                <geom type="mesh" mesh="ring_b" class="visual" material="rizonblue"
                      pos="0 0 -0.0025" euler="0 0 0"/>


                <!-- 设置 link2 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
                <body name="link2" pos="0 0.03 0.21">
                    <!-- 中心位置，质量大小，转动惯量-->
                    <inertial pos="0 0.04 0.1" mass="2.7" diaginertia="0.02 0.02 1e-05"/>
                    <joint name="joint2" pos="0 0 0" axis="0 1 0" range="-2.2689 2.2689" actuatorfrcrange="-123 123"/>
                    <geom type="mesh" mesh="link2_collision" class="collision"/>
                    <geom type="mesh" mesh="link2" class="visual" material="white"/>
                    <geom type="mesh" mesh="ring_b" class="visual" material="rizonblue"
                          pos="0 -0.0025 0" euler="1.5707963267948966 0 0"/>


                    <!-- 设置 link3 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
                    <body name="link3" pos="0 0.035 0.205">
                        <inertial pos="-0.01 0 0.13" mass="2.4" diaginertia="0.01 0.01 1e-05"/>
                        <joint name="joint3" pos="0 0 0" axis="0 0 1" range="-2.9671 2.9671" actuatorfrcrange="-64 64"/>
                        <geom type="mesh" mesh="link3_collision" class="collision"/>
                        <geom type="mesh" mesh="link3" class="visual" material="white"/>
                        <geom type="mesh" mesh="ring_s" class="visual" material="rizonblue"
                              pos="0 0 -0.0025" euler="0 0 0"/>

                        <!-- 设置 link4 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
                        <body name="link4" pos="-0.02 -0.03 0.19" quat="0 0 0 -1">
                            <inertial pos="-0.01 0.03 0.1" mass="2.4" diaginertia="0.02 0.02 1e-05"/>
                            <joint name="joint4" pos="0 0 0" axis="0 1 0" range="-1.8675 2.6878"
                                   actuatorfrcrange="-64 64"/>
                            <geom type="mesh" mesh="link4_collision" class="collision"/>
                            <geom type="mesh" mesh="link4" class="visual" material="white"/>
                            <geom type="mesh" mesh="ring_s" class="visual" material="rizonblue"
                                  pos="0 -0.0025 0" euler="1.5707963267948966 0 0"/>

                            <!-- 设置 link5 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
                            <body name="link5" pos="-0.02 0.025 0.195" quat="0 0 0 -1">
                                <inertial pos="0 0 0.13" mass="2.4" diaginertia="0.01 0.01 1e-06"/>
                                <joint name="joint5" pos="0 0 0" axis="0 0 1" range="-2.9671 2.9671"
                                       actuatorfrcrange="-39 39"/>
                                <geom type="mesh" mesh="link5_collision" class="collision"/>
                                <geom type="mesh" mesh="link5" class="visual" material="white"/>
                                <geom type="mesh" mesh="ring_s" class="visual" material="rizonblue"
                                      pos="0 0 -0.0025" euler="0 0 0"/>

                                <!-- 设置 link6 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
                                <body name="link6" pos="0 0.03 0.19">
                                    <inertial pos="-0.01 0.06 0.07" quat="0.998506 0 0.05464 0" mass="2.1"
                                              diaginertia="0.0101098 0.01 0.000890228"/>
                                    <joint name="joint6" pos="0 0 0" axis="0 1 0" range="-1.3963 4.5379"
                                           actuatorfrcrange="-39 39"/>
                                    <geom type="mesh" mesh="link6_collision" class="collision"/>
                                    <geom type="mesh" mesh="link6" class="visual" material="white"/>
                                    <geom type="mesh" mesh="ring_s" class="visual" material="rizonblue"
                                          pos="0 -0.0025 0" euler="1.5707963267948966 0 0"/>

                                    <!-- 设置 link7 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> -->
                                    <body name="link7" pos="-0.055 0.07 0.11" quat="0.707107 0 -0.707107 0">
                                        <inertial pos="0 0 0.03" mass="0.8" diaginertia="1e-06 1e-06 1e-06"/>
                                        <joint name="joint7" pos="0 0 0" axis="0 0 1" range="-2.9671 2.9671"
                                               actuatorfrcrange="-39 39"/>
                                        <geom type="mesh" mesh="link7_collision" class="collision"/>
                                        <geom type="mesh" mesh="link7" class="visual" material="white"/>
                                        <geom type="mesh" mesh="ring_s" class="visual" material="rizonblue"
                                              pos="0 0 -0.0025" euler="0 0 0"/>


                                    </body> <!-- link7 -->
                                </body> <!-- link6 -->
                            </body> <!-- link5 -->
                        </body> <!-- link4 -->
                    </body> <!-- link3 -->
                </body> <!-- link2 -->
            </body> <!-- link1 -->
        </body> <!-- link0 -->
    </worldbody>


    <actuator>
        <position name="joint1" joint="joint1" class="size3" ctrlrange="-2.7925 2.7925"/>
        <position name="joint2" joint="joint2" class="size3" ctrlrange="-2.2689 2.2689"/>
        <position name="joint3" joint="joint3" class="size3" ctrlrange="-2.9671 2.9671"/>
        <position name="joint4" joint="joint4" class="size3" ctrlrange="-1.8675 2.6878"/>
        <position name="joint5" joint="joint5" class="size1" ctrlrange="-2.9671 2.9671"/>
        <position name="joint6" joint="joint6" class="size1" ctrlrange="-1.3963 4.5379"/>
        <position name="joint7" joint="joint7" class="size1" ctrlrange="-2.9671 2.9671"/>
    </actuator>

    <keyframe>
        <key name="home" qpos="-1.5708 -1.5708 1.5708 -1.5708 -1.5708 0 0"
             ctrl="-1.5708 -1.5708 1.5708 -1.5708 -1.5708 0 0"/>
    </keyframe>

</mujoco>